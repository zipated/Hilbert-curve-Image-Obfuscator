<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Obfuscator</title>
    <!-- 引入Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入Google Fonts: Roboto (MD3 standard) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- 引入Material Symbols -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <!-- 样式 -->
    <link rel="stylesheet" href="style.css">
</head>

<body class="flex items-center justify-center min-h-screen p-4 md:p-8">

    <!-- Main Card: Surface Container High (#2B2930) -->
    <div
        class="w-full max-w-[1200px] 2xl:max-w-[2400px] 2xl:min-h-[85vh] bg-[#2B2930] rounded-[28px] shadow-xl p-6 md:p-8 2xl:p-12 flex flex-col md:flex-row gap-8 2xl:gap-16">

        <!-- 左侧控制面板 -->
        <div class="flex flex-col gap-6 2xl:gap-10 w-full md:w-1/3 2xl:w-[500px] shrink-0">
            <!-- 标题区域 -->
            <div class="mb-2">
                <h1 class="text-[32px] 2xl:text-5xl leading-10 font-normal text-[#E6E0E9]">Image Obfuscator</h1>
                <p class="mt-2 text-[#CAC4D0] text-sm 2xl:text-xl tracking-wide">
                   Based on Hilbert curve
                </p>
            </div>

            <!-- URL 上传区域 (Outlined Text Field) -->
            <div class="flex flex-col gap-1">
                <div class="relative group">
                    <input type="url" id="url-ipt" placeholder=" "
                        class="peer w-full bg-transparent border border-[#938F99] rounded-[4px] px-4 pt-4 pb-2 2xl:px-6 2xl:pt-6 2xl:pb-3 2xl:text-lg text-[#E6E0E9] focus:outline-none focus:border-[#D0BCFF] focus:border-2 transition-colors">
                    <label
                        class="absolute left-4 top-3 2xl:left-6 2xl:top-4 text-[#CAC4D0] text-base 2xl:text-lg duration-200 transform -translate-y-0 scale-100 origin-[0] peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-3 2xl:peer-focus:-translate-y-4 peer-focus:text-[#D0BCFF] pointer-events-none bg-[#2B2930] px-1 peer-[:not(:placeholder-shown)]:scale-75 peer-[:not(:placeholder-shown)]:-translate-y-3 2xl:peer-[:not(:placeholder-shown)]:-translate-y-4 peer-[:not(:placeholder-shown)]:text-[#CAC4D0]">
                        图片 URL
                    </label>
                    <button id="clear-url-btn"
                        class="absolute right-2 top-2 2xl:top-3 p-2 text-[#CAC4D0] hover:text-[#E6E0E9] hidden rounded-full hover:bg-[#49454F]/30 transition-colors">
                        <span class="material-symbols-outlined text-xl 2xl:text-2xl">close</span>
                    </button>
                </div>
                <!-- 错误信息 -->
                <p id="url-error" class="text-[#F2B8B5] text-xs 2xl:text-base px-4 hidden flex items-center gap-1">
                    <span class="material-symbols-outlined text-sm 2xl:text-lg">error</span>
                    <span>URL 无效</span>
                </p>
                <!-- 加载按钮 (Tonal Button) -->
                <button id="url-upload-btn"
                    class="ripple mt-2 h-10 2xl:h-14 2xl:text-lg rounded-full bg-[#4A4458] text-[#E8DEF8] font-medium hover:bg-[#4A4458]/80 hover:shadow-md transition-all flex items-center justify-center gap-2">
                    <span class="material-symbols-outlined text-lg 2xl:text-2xl">image</span>
                    从 URL 加载
                </button>
                <!-- 粘贴按钮 (Tonal Button) -->
                <button id="paste-btn"
                    class="ripple mt-2 h-10 2xl:h-14 2xl:text-lg rounded-full bg-[#4A4458] text-[#E8DEF8] font-medium hover:bg-[#4A4458]/80 hover:shadow-md transition-all flex items-center justify-center gap-2">
                    <span class="material-symbols-outlined text-lg 2xl:text-2xl">content_paste</span>
                    从剪贴板粘贴
                </button>
            </div>

            <!-- 操作按钮组 -->
            <div class="grid grid-cols-2 gap-3 2xl:gap-5">
                <!-- 混淆: Filled Button (Primary) -->
                <button id="enc"
                    class="ripple h-10 2xl:h-14 2xl:text-lg rounded-full bg-[#D0BCFF] text-[#381E72] font-medium hover:bg-[#E8DEF8] hover:shadow-md transition-all flex items-center justify-center gap-2">
                    <span class="material-symbols-outlined text-lg 2xl:text-2xl">visibility_off</span>
                    混淆
                </button>
                <!-- 解混淆: Filled Button (Primary) -->
                <button id="dec"
                    class="ripple h-10 2xl:h-14 2xl:text-lg rounded-full bg-[#D0BCFF] text-[#381E72] font-medium hover:bg-[#E8DEF8] hover:shadow-md transition-all flex items-center justify-center gap-2">
                    <span class="material-symbols-outlined text-lg 2xl:text-2xl">visibility</span>
                    解混淆
                </button>
            </div>

            <div class="grid grid-cols-2 gap-3 2xl:gap-5">
                <!-- 还原: Outlined Button -->
                <button id="revert"
                    class="ripple h-10 2xl:h-14 2xl:text-lg rounded-full border border-[#938F99] text-[#E6E0E9] font-medium hover:bg-[#4A4458]/30 transition-all flex items-center justify-center gap-2">
                    <span class="material-symbols-outlined text-lg 2xl:text-2xl">undo</span>
                    还原
                </button>
                <!-- 删除: Text Button (Error color) -->
                <button id="del"
                    class="ripple h-10 2xl:h-14 2xl:text-lg rounded-full text-[#F2B8B5] font-medium hover:bg-[#F2B8B5]/10 transition-all flex items-center justify-center gap-2">
                    <span class="material-symbols-outlined text-lg 2xl:text-2xl">delete</span>
                    清空
                </button>
            </div>

            <!-- 格式选择 -->
            <div class="flex flex-col gap-2 2xl:gap-4 mt-2">
                <span class="text-sm 2xl:text-lg font-medium text-[#E6E0E9]">输出格式</span>
                <div class="flex gap-6 2xl:gap-10">
                    <label class="flex items-center gap-3 cursor-pointer group">
                        <div class="relative flex items-center justify-center">
                            <input type="radio" name="fmt" value="image/jpeg" checked
                                class="peer appearance-none w-5 h-5 2xl:w-7 2xl:h-7 border-2 border-[#CAC4D0] rounded-full checked:border-[#D0BCFF] checked:bg-[#D0BCFF] transition-all">
                            <div
                                class="absolute w-2.5 h-2.5 2xl:w-3.5 2xl:h-3.5 bg-[#381E72] rounded-full scale-0 peer-checked:scale-100 transition-transform">
                            </div>
                        </div>
                        <span
                            class="text-[#E6E0E9] text-sm 2xl:text-lg group-hover:text-[#D0BCFF] transition-colors">JPEG
                            (快速)</span>
                    </label>
                    <label class="flex items-center gap-3 cursor-pointer group">
                        <div class="relative flex items-center justify-center">
                            <input type="radio" name="fmt" value="image/png"
                                class="peer appearance-none w-5 h-5 2xl:w-7 2xl:h-7 border-2 border-[#CAC4D0] rounded-full checked:border-[#D0BCFF] checked:bg-[#D0BCFF] transition-all">
                            <div
                                class="absolute w-2.5 h-2.5 2xl:w-3.5 2xl:h-3.5 bg-[#381E72] rounded-full scale-0 peer-checked:scale-100 transition-transform">
                            </div>
                        </div>
                        <span
                            class="text-[#E6E0E9] text-sm 2xl:text-lg group-hover:text-[#D0BCFF] transition-colors">PNG
                            (无损)</span>
                    </label>
                </div>
            </div>

            <!-- 说明信息 -->
            <div class="mt-auto pt-4 border-t border-[#49454F]">
                <p class="text-xs 2xl:text-base text-[#938F99]">
                    * 仅供技术交流。WASM加速引擎已就绪。
                </p>
            </div>

            <!-- Hidden file input -->
            <input type="file" accept="image/*" id="ipt" class="hidden">
        </div>

        <!-- 右侧图片显示区域 -->
        <div id="image-container"
            class="flex-1 min-h-[400px] h-[60vh] md:h-auto 2xl:min-h-[600px] bg-[#141218] rounded-[24px] border-2 border-dashed border-[#49454F] hover:border-[#D0BCFF] hover:bg-[#141218]/80 transition-all flex items-center justify-center relative cursor-pointer overflow-hidden group">

            <!-- Placeholder State -->
            <div id="placeholder"
                class="text-center pointer-events-none group-hover:scale-105 transition-transform duration-300">
                <span
                    class="material-symbols-outlined text-[64px] 2xl:text-[96px] text-[#49454F] group-hover:text-[#D0BCFF] transition-colors">add_photo_alternate</span>
                <p class="mt-4 text-[#E6E0E9] text-lg 2xl:text-2xl font-normal">点击或拖拽上传图片</p>
                <p class="mt-1 text-[#938F99] text-sm 2xl:text-lg">支持 JPG, PNG, WebP</p>
            </div>

            <!-- Loading State -->
            <div id="loader" class="hidden flex flex-col items-center gap-4 pointer-events-none z-10">
                <svg class="md3-circular-progress" viewBox="25 25 50 50">
                    <circle cx="50" cy="50" r="20"></circle>
                </svg>
                <p class="text-[#D0BCFF] text-sm font-medium tracking-wide animate-pulse">处理中...</p>
            </div>

            <!-- Image Display -->
            <img id="display-img" class="hidden max-w-full max-h-full object-contain rounded-lg shadow-lg z-0"
                alt="Result Image">
        </div>

    </div>

    <script src="app.js"></script>

</body>

</html>
